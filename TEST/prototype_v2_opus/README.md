# Stock-Keeper UI Prototype V2 Opus

V1에서 발전된 **두 번째 UI 프로토타입**입니다.  
테마 시스템, 상태 UI(Empty/Loading/Error), 도넛 차트 등 실제 앱에 가까운 UX를 구현했습니다.

---

## 🚀 실행 방법

- VS Code **Live Server** 확장으로 `index.html` 실행 권장
- 또는 브라우저에서 `index.html` 직접 열기

---

## 📱 화면 구성

### 1. 로그인 (`#screen-login`)

V1과 동일한 구조의 첫 진입 화면입니다. Google 소셜 로그인과 앱 기능 하이라이트(포트폴리오 관리/실시간 시세/리밸런싱 분석)를 표시합니다. 앱 이름이 "ReBalance"에서 **"Stock-Keeper"**로 변경되었습니다.

### 2. 프로필 설정 (`#screen-profile`)

신규 사용자 온보딩 화면입니다. V1과 동일하게 프로필 사진, 닉네임, 투자 성향 칩을 제공합니다. 스타일이 테마 시스템에 맞게 CSS 변수 기반으로 리팩토링되었습니다.

### 3. 홈 - 포트폴리오 목록 (`#screen-home`)

메인 대시보드입니다. V1 구조를 유지하면서 **상태 UI**가 추가되었습니다:

- **Empty State**: 포트폴리오가 없을 때 안내 메시지와 생성 버튼
- **Loading State**: 스켈레톤 카드 애니메이션
- **Error State**: 오류 메시지와 재시도 버튼

포트폴리오 카드의 컬러바가 CSS 변수(`--gradient-primary`) 기반으로 변경되어 테마 적용이 가능해졌습니다.

### 4. 포트폴리오 상세 (`#screen-detail`)

보유 종목 표시 방식이 크게 개선되었습니다:

- **리밸런싱 인사이트 배너**: 상단에 리밸런싱 필요 여부를 요약 표시. "삼성전자 +17% 초과 · 카카오 -20% 미달" 형태로 핵심 정보 노출
- **종목 카드 UI**: 테이블 → 카드 형태로 변경. 각 카드에 종목명/코드, 평가금액, 수익률, 현재/목표 비율, **편차 바(deviation bar)** 포함
- **편차 태그**: "+17% 초과", "-20% 미달", "적정 범위 ✓" 등 상태를 색상과 텍스트로 명확히 표시
- **비율 합계 표시**: 헤더에 "비율합계 100%" 표시 추가

Empty State도 추가되어 종목이 없을 때 안내 UI가 표시됩니다.

### 5. 종목 검색 (`#screen-search`)

V1과 동일한 검색 UI에 **검색 결과 없음 Empty State**가 추가되었습니다. 검색어에 매칭되는 종목이 없을 때 "다른 검색어로 시도해보세요" 안내가 표시됩니다.

### 6. 리밸런싱 분석 (`#screen-rebalance`)

차트 방식이 **가로 막대 차트 → 도넛 차트 2개 비교**로 완전히 변경되었습니다:

- **현재 비율 도넛**: 현재 포트폴리오 구성을 원형으로 시각화
- **목표 비율 도넛**: 목표 구성을 원형으로 시각화
- **범례**: 각 도넛 하단에 종목별 색상과 비율 표시

하단의 리밸런싱 제안 카드는 V1과 동일한 구조를 유지합니다.

### 7. 설정 (`#screen-settings`)

V1과 동일한 구조입니다. 버전 정보가 "1.0.0" → "**2.0.0 Opus**"로 업데이트되었습니다.

---

## 🧩 주요 컴포넌트

### 모달

| 모달 ID | 용도 |
|---------|------|
| `stock-add-modal` | 종목 추가. V1과 동일 |
| `threshold-modal` | 리밸런싱 임계값 설정. V1과 동일 |
| `add-portfolio-modal` | 포트폴리오 생성. 색상 팔레트가 테마에 맞게 조정됨 |

### 상태 컴포넌트 (V2 신규)

| 상태 | 적용 화면 | 설명 |
|------|-----------|------|
| **Empty** | 홈, 상세, 검색 | 데이터 없음 안내 + CTA 버튼 |
| **Loading** | 홈 | 스켈레톤 카드 3개 |
| **Error** | 홈 | 오류 메시지 + 재시도 버튼 |

### 신규 UI 요소

- **테마 컨트롤러**: 좌측 상단 고정. Dark/Light 모드 토글 버튼
- **편차 바 (Deviation Bar)**: 목표 비율 대비 현재 비율의 편차를 시각화. 초과(sell 색상) / 미달(buy 색상) / 적정(ok 색상)으로 구분
- **인사이트 배너**: 핵심 정보를 한 줄로 요약 표시하는 카드형 배너
- **도넛 차트**: CSS로 구현된 원형 차트. 중앙에 라벨(현재/목표) 표시

---

## 🎨 스타일 특징

- **단일 CSS 파일**: `style.css` (51KB) - V1 대비 약 2배
- **CSS 변수 도입**: `--gradient-primary`, 테마 색상 등 변수 기반 스타일링
- **테마 시스템**: `data-theme="sage"` 속성으로 Forest(Sage) 테마 적용
- **다크/라이트 모드**: `data-mode` 속성으로 전환
- **한국 주식 색상 컨벤션**: 상승=빨강, 하락=파랑 적용

---

## 📊 V1 대비 주요 변경점

| 항목 | V1 | V2 Opus |
|------|-----|---------|
| 앱 이름 | ReBalance | Stock-Keeper |
| 테마 | 없음 | Dark/Light + 색상 테마 |
| 상태 UI | 없음 | Empty/Loading/Error |
| 종목 표시 | 테이블 | 카드 + 편차 바 |
| 리밸런싱 차트 | 가로 막대 | 도넛 2개 비교 |
| CSS 크기 | 27KB | 51KB |

---

## 📊 V3에서 개선된 점

v3에서는 코드 구조가 완전히 리팩토링됩니다:

- **모듈화**: 단일 HTML → `screens/`, `css/screens/`, `js/` 폴더로 분리
- **동적 로딩**: 화면별 HTML을 fetch로 로드
- **CSS 변수 시스템**: `variables.css`에 모든 토큰 집중 관리
- **SRP 적용**: JS 파일을 역할별로 분리 (navigation, theme, state, utils)
