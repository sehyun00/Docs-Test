<!-- Screen: 종목 상세 -->
<div id="screen-stock-detail" class="screen">
    <div class="screen-body">
        <header class="header">
            <button class="back-btn" onclick="navigateTo('screen-detail')">←</button>
            <div class="header-title-group">
                <h2 id="stock-detail-name">삼성전자</h2>
                <span class="stock-code" id="stock-detail-code">005930</span>
            </div>
            <button class="header-action-btn" onclick="openStockEditModal()">✏️</button>
        </header>

        <!-- 현재가 섹션 -->
        <section class="price-section">
            <div class="price-main">
                <span class="current-price" id="detail-current-price">₩74,500</span>
                <span class="price-change positive" id="detail-price-change">+1,200 (+1.6%)</span>
            </div>
            <span class="price-time" id="detail-price-time">15:42 기준</span>
        </section>

        <!-- 차트 영역 (Placeholder) -->
        <section class="chart-section">
            <div class="chart-placeholder">
                <span class="chart-icon">📈</span>
                <p>주가 차트</p>
                <span class="coming-soon">추후 지원 예정</span>
            </div>
        </section>

        <!-- 보유 현황 섹션 -->
        <section class="holdings-section">
            <h3 class="section-title">내 보유 현황</h3>
            <div class="holdings-card">
                <div class="holdings-row">
                    <span class="holdings-label">보유 수량</span>
                    <span class="holdings-value" id="detail-quantity">150주</span>
                </div>
                <div class="holdings-row">
                    <span class="holdings-label">평균 매입가</span>
                    <span class="holdings-value" id="detail-avg-price">₩71,200</span>
                </div>
                <div class="holdings-row">
                    <span class="holdings-label">평가금액</span>
                    <span class="holdings-value" id="detail-total-value">₩11,175,000</span>
                </div>
                <div class="holdings-row highlight">
                    <span class="holdings-label">수익금</span>
                    <span class="holdings-value positive" id="detail-profit">+₩495,000</span>
                </div>
                <div class="holdings-row highlight">
                    <span class="holdings-label">수익률</span>
                    <span class="holdings-value positive" id="detail-profit-rate">+4.6%</span>
                </div>
            </div>
        </section>

        <!-- 비율 현황 섹션 -->
        <section class="ratio-section">
            <h3 class="section-title">비율 현황</h3>
            <div class="ratio-card">
                <div class="ratio-row">
                    <span class="ratio-label">현재 비율</span>
                    <div class="ratio-bar-wrapper">
                        <div class="ratio-bar current" style="width: 35%"></div>
                    </div>
                    <span class="ratio-value" id="detail-current-ratio">35%</span>
                </div>
                <div class="ratio-row">
                    <span class="ratio-label">목표 비율</span>
                    <div class="ratio-bar-wrapper">
                        <div class="ratio-bar target" style="width: 30%"></div>
                    </div>
                    <span class="ratio-value" id="detail-target-ratio">30%</span>
                </div>
                <div class="ratio-deviation warning">
                    <span class="deviation-icon">⚠️</span>
                    <span class="deviation-text">괴리율 +17% (임계값 초과)</span>
                </div>
            </div>
        </section>

        <!-- 하단 버튼 -->
        <div class="stock-detail-actions">
            <button class="secondary-btn" onclick="openStockEditModal()">수량 수정</button>
            <button class="danger-btn" onclick="confirmDeleteStock()">삭제</button>
        </div>
    </div>

    <!-- 수량 수정 바텀시트 -->
    <div id="stock-edit-modal" class="bottom-sheet-overlay" style="display: none;" onclick="closeStockEditModal(event)">
        <div class="bottom-sheet">
            <div class="bottom-sheet-handle"></div>
            <div class="bottom-sheet-header">
                <h3>종목 수정</h3>
                <button class="close-btn" onclick="closeStockEditModal()">×</button>
            </div>
            <div class="bottom-sheet-body">
                <div class="edit-stock-info">
                    <span class="edit-stock-name" id="edit-stock-name">삼성전자</span>
                    <span class="edit-stock-code" id="edit-stock-code">005930</span>
                </div>

                <div class="edit-form-group">
                    <label>보유 수량</label>
                    <div class="number-input">
                        <button class="num-btn" onclick="adjustEditQuantity(-1)">-</button>
                        <input type="number" id="edit-quantity-input" value="150" min="1"
                            oninput="updateEditQuantityDisplay()">
                        <button class="num-btn" onclick="adjustEditQuantity(1)">+</button>
                    </div>
                </div>

                <div class="edit-form-group">
                    <div class="ratio-label-row">
                        <label>목표 비율</label>
                        <span class="ratio-warning-icon" id="edit-ratio-warning-icon">⚠️</span>
                    </div>
                    <div class="ratio-slider-row">
                        <input type="range" id="edit-ratio-slider" class="ratio-slider" min="0" max="100" value="30"
                            oninput="updateEditRatioDisplay()">
                        <span class="slider-value" id="edit-ratio-value">30%</span>
                    </div>
                    <!-- 비중 합계 표시 -->
                    <div class="edit-ratio-sum-info" id="edit-ratio-sum-info">
                        <span>기존 종목: <strong id="edit-base-ratio">70%</strong></span>
                        <span>+ 현재: <strong id="edit-current-ratio">30%</strong></span>
                        <span class="ratio-total">합계: <strong id="edit-total-ratio">100%</strong></span>
                        <span class="ratio-warning-message" id="edit-ratio-warning-message">
                            비중 합계가 100%를 초과합니다
                        </span>
                    </div>
                </div>
            </div>
            <div class="bottom-sheet-footer">
                <button class="cancel-btn" onclick="closeStockEditModal()">취소</button>
                <button class="confirm-btn" onclick="saveStockEdit()">저장</button>
            </div>
        </div>
    </div>
</div>