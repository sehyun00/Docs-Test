# PRD ê²€ì¦ ê²°ê³¼ - ì‚¬ìš©ì ê²°ì • í•„ìš”

> ì•„ë˜ í•­ëª©ë“¤ì€ AIê°€ ìë™ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ ì‚¬ìš©ì ê²°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
> ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ê³  ì €ì¥í•œ í›„ `/prd-prepare`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.

---

## ğŸ”´ ì¤‘ë³µ í•´ê²° (2ê±´)

### 1. token_vault â†” refresh_tokens

í† í° ì €ì¥ í…Œì´ë¸”ì´ 2ê°œ ì¡´ì¬í•©ë‹ˆë‹¤.

| íŒŒì¼              | ìš©ë„                    | íŠ¹ì§•                                  |
| ----------------- | ----------------------- | ------------------------------------- |
| token-vault.md    | ì•”í˜¸í™”ëœ í† í° ì €ì¥      | AES-256-GCM ì•”í˜¸í™”, USER/ACCOUNT êµ¬ë¶„ |
| refresh-tokens.md | Refresh Token í•´ì‹œ ì €ì¥ | SHA-256 í•´ì‹œ, ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ìš©         |

**ê¶Œì¥ ì¡°ì¹˜ ì„ íƒ:**

- [ ] ë‘˜ ë‹¤ ìœ ì§€ (ìš©ë„ê°€ ë‹¤ë¦„: vault=ì•”í˜¸í™” ì €ì¥, refresh=í•´ì‹œ ì €ì¥)
- [X] `token-vault.md`ë¡œ í†µí•© (refresh_tokens ì‚­ì œ)
- [ ] `refresh-tokens.md`ë¡œ í†µí•© (token_vault ì‚­ì œ)

---

### 2. device_tokens â†” fcm_tokens

í‘¸ì‹œ í† í° ì €ì¥ í…Œì´ë¸”ì´ 2ê°œ ì¡´ì¬í•©ë‹ˆë‹¤.

| íŒŒì¼                     | ìš©ë„                                        |
| ------------------------ | ------------------------------------------- |
| device-tokens.md         | í‘¸ì‹œ ì•Œë¦¼ìš© ë””ë°”ì´ìŠ¤ í† í° (IOS/ANDROID/WEB) |
| notification-settings.md | fcm_tokens í…Œì´ë¸” í¬í•¨ (IOS/ANDROIDë§Œ)      |

**ê¶Œì¥ ì¡°ì¹˜ ì„ íƒ:**

- [X] `device-tokens.md` ìœ ì§€ (fcm_tokens í…Œì´ë¸” ì‚­ì œ)
- [ ] `fcm_tokens` ìœ ì§€ (device-tokens.md ì‚­ì œ)

---

## ğŸŸ¡ API ëˆ„ë½ - ì •ë³´ í•„ìš” (4ê±´)

### 1. accounts (ê³„ì¢Œ ì—°ë™)

ê³„ì¢Œì—°ë™ì€ p2 ì´ìƒë¶€í„° ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ì–´

p1ì—ì„œëŠ” ì‚¬ìš©ìê°€ ìì‚°ì„ ì§ì ‘ ì…ë ¥í•˜ëŠ” ìˆ˜ë™í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ê±°ì•¼.

**ì§€ì›í•  ì¦ê¶Œì‚¬:**

- [ ] í•œêµ­íˆ¬ìì¦ê¶Œ
- [ ] ì‚¼ì„±ì¦ê¶Œ
- [ ] í‚¤ì›€ì¦ê¶Œ
- [ ] ê¸°íƒ€: ________________

**ì—°ë™ ë°©ì‹:**

- [ ] OAuth
- [ ] Open API
- [ ] ìŠ¤í¬ë˜í•‘ (MTS ì—°ë™)

**í•„ìš”í•œ API:**

- [ ] ê³„ì¢Œ ëª©ë¡ ì¡°íšŒ
- [ ] ê³„ì¢Œ ì—°ê²°/í•´ì œ
- [ ] ì”ê³  ì¡°íšŒ (ìë™ ë™ê¸°í™”)
- [ ] ê±°ë˜ ë‚´ì—­ ì¡°íšŒ

---

### 2. announcements (ê³µì§€ì‚¬í•­)

**ì ‘ê·¼ ê¶Œí•œ:**

- [ ] ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥ (ë¹„ë¡œê·¸ì¸)
- [X] ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ

**í•„ìš”í•œ API:**

- [X] ëª©ë¡ ì¡°íšŒ
- [X] ìƒì„¸ ì¡°íšŒ
- [X] íŒì—… ê³µì§€ ì¡°íšŒ (ì•± ì‹¤í–‰ ì‹œ)

---

### 3. portfolio_snapshots (ìŠ¤ëƒ…ìƒ·)

**ìŠ¤ëƒ…ìƒ· ìƒì„± ë°©ì‹:**

- [X] ìˆ˜ë™ ì €ì¥ ë²„íŠ¼
- [ ] ë¦¬ë°¸ëŸ°ì‹± ì‹œ ìë™ ì €ì¥
- [ ] ì£¼ê¸°ì  ìë™ ì €ì¥ (ì¼/ì£¼/ì›”)

**í•„ìš”í•œ API:**

- [X] ìŠ¤ëƒ…ìƒ· ëª©ë¡ ì¡°íšŒ
- [X] ìŠ¤ëƒ…ìƒ· ìƒì„¸ ì¡°íšŒ
- [X] ìŠ¤ëƒ…ìƒ· ë¹„êµ

---

### 4. user_consents (ë™ì˜ ê´€ë¦¬)

**í•„ìš”í•œ API:**

- [X] ë™ì˜ í˜„í™© ì¡°íšŒ
- [X] ë™ì˜ ì—…ë°ì´íŠ¸
- [X] ì•½ê´€ ë²„ì „ ì¡°íšŒ

---

## âœ… AIê°€ ìë™ ì²˜ë¦¬í•  í•­ëª©

| í•­ëª©            | ìˆ˜ëŸ‰ | ìƒíƒœ             |
| --------------- | ---- | ---------------- |
| Dead Link       | 0ê±´  | âœ… ì—†ìŒ          |
| í”„ë¡ íŠ¸ë§¤í„° ëˆ„ë½ | 0ê±´  | âœ… ì—†ìŒ          |
| Phase ë¶ˆì¼ì¹˜    | 0ê±´  | âœ… ì—†ìŒ          |
| INDEX.md ë¶ˆì¼ì¹˜ | 0ê±´  | âœ… db: 28ê°œ ì¼ì¹˜ |

---

## ğŸ“‹ ì°¸ê³ : API ëˆ„ë½ ì „ì²´ ëª©ë¡

> ì•„ë˜ í…Œì´ë¸”ë“¤ì€ `related.api: []`ë¡œ APIê°€ ì—†ìŠµë‹ˆë‹¤.
> ë‚´ë¶€ìš©/ë¡œê·¸ í…Œì´ë¸”ì€ API ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| DB ìŠ¤í™                    | í…Œì´ë¸”                  | API í•„ìš” ì—¬ë¶€                        |
| -------------------------- | ----------------------- | ------------------------------------ |
| accounts.md                | accounts                | âš ï¸ í•„ìš”                            |
| account-stock-entries.md   | account_stock_entries   | accounts APIì— í¬í•¨                  |
| account-cash-entries.md    | account_cash_entries    | accounts APIì— í¬í•¨                  |
| announcements.md           | announcements           | âš ï¸ í•„ìš”                            |
| portfolio-snapshots.md     | portfolio_snapshots     | âš ï¸ í•„ìš”                            |
| portfolio-stock-entries.md | portfolio_stock_entries | portfolio APIì— í¬í•¨                 |
| portfolio-cash-entries.md  | portfolio_cash_entries  | portfolio APIì— í¬í•¨                 |
| user-consents.md           | user_consents           | âš ï¸ í•„ìš”                            |
| settings.md                | settings                | âš ï¸ í•„ìš” (ë˜ëŠ” authì— í¬í•¨)         |
| token-vault.md             | token_vault             | âŒ ë‚´ë¶€ìš©                            |
| device-tokens.md           | device_tokens           | âš ï¸ í•„ìš” (fcm-token.mdì™€ ì¤‘ë³µ ê²€í† ) |
| notification-types.md      | notification_types      | âŒ ë‚´ë¶€ìš©                            |
| audit-logs.md              | audit_logs              | âŒ ë¡œê·¸ í…Œì´ë¸”                       |
| user-activities.md         | user_activities         | âŒ ë¡œê·¸ í…Œì´ë¸”                       |
