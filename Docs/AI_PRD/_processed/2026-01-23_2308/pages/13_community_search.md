# 커뮤니티 검색 페이지 시나리오 (Community Search)

## 개요

- 커뮤니티 통합 검색 화면
- 종목, 게시글, 사용자 검색 결과 통합 표시
- 종목별 포함 포트폴리오 탐색

## 진입 조건

| 조건 | 동작 |
|------|------|
| 피드 검색 버튼 탭 | 검색 화면 진입 |
| 검색 기록 있음 | 최근 검색어 표시 |

## 레이아웃

### 초기 상태 (검색어 입력 전)

```
┌─────────────────────────────────────┐
│  ← [🔍 검색어를 입력하세요...]       │
├─────────────────────────────────────┤
│                                     │
│  최근 검색                   [전체삭제]│
│  ┌─────────────────────────────────┐│
│  │ 삼성전자                     ✕  ││
│  │ 배당주                       ✕  ││
│  │ 투자왕                       ✕  ││
│  └─────────────────────────────────┘│
│                                     │
│  인기 검색어                        │
│  ┌─────────────────────────────────┐│
│  │ 1. 테슬라    2. 엔비디아        ││
│  │ 3. 삼성전자  4. 배당주          ││
│  │ 5. 성장주    6. ETF            ││
│  └─────────────────────────────────┘│
│                                     │
└─────────────────────────────────────┘
```

### 검색 결과 상태

```
┌─────────────────────────────────────┐
│  ← [🔍 삼성                    ✕]   │
├─────────────────────────────────────┤
│                                     │
│  종목                     더 보기 > │
│  ┌─────────────────────────────────┐│
│  │ 삼성전자 (005930)       70,000  ││
│  │                        +2.5% 🔺 ││
│  │ 삼성SDI (006400)       450,000  ││
│  │                        -0.8% 🔻 ││
│  │ 삼성바이오 (207940)    780,000  ││
│  │                        +1.2% 🔺 ││
│  └─────────────────────────────────┘│
│                                     │
│  게시글                   더 보기 > │
│  ┌─────────────────────────────────┐│
│  │ 삼성전자 실적 분석      ❤️ 42   ││
│  │ 삼성그룹 전망 2026      ❤️ 28   ││
│  └─────────────────────────────────┘│
│                                     │
│  사용자                   더 보기 > │
│  ┌─────────────────────────────────┐│
│  │ 🧑 삼성러버        팔로워 123   ││
│  │ 🧑 삼성맨          팔로워 45    ││
│  └─────────────────────────────────┘│
│                                     │
└─────────────────────────────────────┘
```

### 종목 상세 (종목 클릭 후)

```
┌─────────────────────────────────────┐
│  ← 삼성전자                          │
├─────────────────────────────────────┤
│                                     │
│  이 종목이 포함된 포트폴리오          │
│                                     │
│  ┌─────────────────────────────────┐│
│  │ 📊 배당주 포트폴리오            ││
│  │    투자왕 · ❤️ 156 · 📋 23     ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │ 📊 IT 성장주                    ││
│  │    테크러버 · ❤️ 89 · 📋 12    ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │ 📊 반도체 집중 투자             ││
│  │    칩마니아 · ❤️ 67 · 📋 8     ││
│  └─────────────────────────────────┘│
│                                     │
└─────────────────────────────────────┘
```

## 컴포넌트

### 검색 헤더

| 요소 | 설명 |
|------|------|
| 뒤로가기 (←) | 이전 화면 복귀 |
| 검색 입력창 | 플레이스홀더 + 자동 포커스 |
| 지우기 버튼 (✕) | 검색어 초기화 |

### 최근 검색어 섹션

| 요소 | 설명 |
|------|------|
| 섹션 제목 | "최근 검색" |
| 전체 삭제 | 검색 기록 전체 삭제 |
| 검색어 태그 | 각 검색어 + 개별 삭제 버튼 |

### 종목 결과 섹션

| 요소 | 설명 |
|------|------|
| 종목명 | 종목명 (종목코드) |
| 현재가 | ₩금액 |
| 등락률 | +N.N% 🔺 / -N.N% 🔻 |
| 더 보기 | 종목 전체 결과 화면 이동 |

### 게시글 결과 섹션

| 요소 | 설명 |
|------|------|
| 제목 | 게시글 제목 (1줄) |
| 좋아요 | ❤️ N |
| 더 보기 | 게시글 전체 결과 화면 이동 |

### 사용자 결과 섹션

| 요소 | 설명 |
|------|------|
| 프로필 | 캐릭터 아이콘 |
| 닉네임 | 사용자 닉네임 |
| 팔로워 | 팔로워 N명 |
| 더 보기 | 사용자 전체 결과 화면 이동 |

### 종목 포함 포트폴리오

| 요소 | 설명 |
|------|------|
| 포트폴리오명 | 📊 + 이름 |
| 작성자 정보 | 작성자명 · 좋아요 · 복사수 |

## 상호작용

| 액션 | 동작 |
|------|------|
| 검색어 입력 | 500ms 디바운스 후 검색 실행 |
| 최근 검색어 탭 | 해당 검색어로 즉시 검색 |
| 최근 검색어 삭제 (✕) | 해당 검색어만 삭제 |
| 전체 삭제 | 모든 검색 기록 삭제 |
| 종목 탭 | 해당 종목 포함 포트폴리오 목록 |
| 게시글 탭 | 게시글 상세 화면 |
| 사용자 탭 | 프로필 화면 |
| 더 보기 탭 | 해당 카테고리 전체 결과 (페이지네이션) |
| 뒤로가기 | 이전 화면 (피드) 복귀 |
| 검색어 지우기 (✕) | 초기 상태로 복귀 |

## 상태

| 상태 | UI |
|------|-----|
| 초기 | 최근 검색어 + 인기 검색어 |
| 입력 중 | 실시간 자동완성 (선택) |
| 검색 중 | 스피너 표시 |
| 결과 있음 | 섹션별 결과 표시 |
| 결과 없음 | "검색 결과가 없습니다" |
| Error | 에러 메시지 + 재시도 버튼 |

## 검색 제약 조건

| 조건 | 동작 |
|------|------|
| 검색어 2자 미만 | 검색 실행 안함 + 안내 메시지 |
| 검색어 50자 초과 | 입력 제한 |
| 특수문자만 입력 | 결과 없음 표시 |

## 엣지 케이스

| 상황 | 처리 |
|------|------|
| 검색어 1자 입력 | "2자 이상 입력해주세요" 안내 |
| 검색 결과 없음 | Empty State + 다른 검색어 추천 |
| 네트워크 오류 | 에러 메시지 + 재시도 버튼 |
| 빠른 연속 입력 | 디바운스로 마지막 입력만 검색 |
| 종목 포트폴리오 0개 | "이 종목을 포함한 포트폴리오가 없습니다" |
| 삭제된 사용자/게시글 | 결과에서 제외 |

## 프로토타입 체크리스트

### 검색 헤더

- [ ] `[직접]` 뒤로가기 버튼
- [ ] `[직접]` 검색 입력창 (플레이스홀더)
- [ ] `[직접]` 검색어 지우기 버튼

### 초기 상태

- [ ] `[직접]` 최근 검색어 표시
- [ ] `[직접]` 인기 검색어 표시
- [ ] `[직접]` 전체 삭제 버튼
- [ ] `[직접]` 개별 삭제 버튼

### 검색 결과

- [ ] `[직접]` 종목 섹션 + 더보기
- [ ] `[직접]` 종목 현재가/등락률 표시
- [ ] `[직접]` 게시글 섹션 + 더보기
- [ ] `[직접]` 사용자 섹션 + 더보기

### 종목 상세

- [ ] `[직접]` 종목명 헤더
- [ ] `[직접]` 포함 포트폴리오 목록

### 상태 UI

- [ ] `[패널]` Loading 상태 - 스피너
- [ ] `[패널]` Empty 상태 - 결과 없음 메시지
- [ ] `[패널]` Error 상태 - 에러 메시지

## 관련 스펙

- API: `../../specs/api/community/search.md`
- UI: `../../specs/ui/community/search.md`
- 이전 화면: `12_community_feed.md`
