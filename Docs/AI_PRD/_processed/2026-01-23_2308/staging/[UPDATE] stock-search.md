---
batch: 2026-01-23_2100
domain: stock
type: update
---
# 종목 검색 및 추가 고도화

## 1. 개요

Inbox의 `05_stock_search.md` 요구사항을 반영하여 검색 화면의 정보 밀도를 높이고, 종목 추가 UX를 **전체 화면**에서 **모달(Modal)** 형태로 변경하여 맥락 유지를 강화합니다.

## 2. 변경 사항 요약

| 구분         | 항목      | 변경 내용                                                |
| ------------ | --------- | -------------------------------------------------------- |
| **UI** | 검색 화면 | 검색 결과에 '원화 가격', '등락률 색상', '보유 배지' 추가 |
| **UI** | 추가 화면 | 전체 화면 → 모달(Modal)로 변경, '비율 슬라이더' UX 개선 |

## 3. 상세 스펙 변경

### A. [UI] `specs/ui/stock/search.md`

#### 수정: 검색 결과 아이템

기존 텍스트 위주에서 시각적 정보(색상, 배지)를 강화합니다.

```markdown
### 2. 검색 결과 목록 (Item Reference)

| 요소 | 설명 | 비고 |
|------|------|------|
| **이미 보유 배지** | 이미 포트폴리오에 있는 종목 시 표시 | **[추가]** |
| 등락률 | 양수(빨강), 음수(파랑), 0(회색) 색상 구분 | |
| 현재가 | ₩/$/¥ 등 통화 기호 표시 | |
```

### B. [UI] `specs/ui/stock/add.md`

#### 수정: 화면 유형 (Modal)

`04_portfolio_detail.md`나 `search.md` 위에서 팝업 형태로 뜨도록 변경합니다.

```markdown
---
type: ui
phase: P1
screen: 종목 추가 모달 (Modal)  <-- 변경
---

## 레이아웃 (Modal)

~~~
┌─────────────────────────────────────┐
│ 현대자동차                      [X] │
├─────────────────────────────────────┤
│ ₩186,500                   +1.24%  │
├─────────────────────────────────────┤
│ 보유 수량                           │
│         [-]  10주  [+]              │
│         예상 금액: ₩1,865,000       │
├─────────────────────────────────────┤
│ 목표 비율                    10%   │
│ ○━━━━━━●━━━━━━━━━━━━━━○           │
├─────────────────────────────────────┤
...
~~~
```

#### 수정: 상호작용

- **[취소]** 또는 **[X]**: 모달 닫기 (이전 화면 유지)
- **[추가]**: 추가 완료 후 모달 닫기 + 토스트 메시지 ("추가되었습니다") 및 목록 갱신

## 4. AI 분석 및 확인 사항

### 🔍 논리적 검증

- **UX 변경**: 모달로 변경 시 사용자가 현재 작업 중인 포트폴리오 컨텍스트를 잃지 않아 더 나은 경험을 제공합니다.
- **API 영향**: API는 `POST /items` 그대로 사용하므로 변경 없음.

### ❓ 확인 필요 사항

#### 1. 이미 보유 중인 종목 선택 시

검색 결과에 '보유 배지'가 있어도 사용자가 누를 수 있다면 어떻게 처리할까요?
(Inbox에는 "토스트: 이미 보유 중인 종목입니다"라고 되어 있음)

- [X] **옵션 A (선택 불가)**: 배지 있는 항목은 탭 비활성화 (Dimmed)
- [ ] **옵션 B (안내 메시지)**: 탭 시 토스트 메시지 띄우고 진입 차단 ("이미 보유 중입니다")
- [ ] 기타: ________________
